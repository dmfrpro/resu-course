# Task 2

Внутри `_NimMainInner` функции под конец запускается игра, пусть эта функция будет называться `run_game()`:
![[assets/f2_run_game.png]]

Внутри нее, судя по всему, указана логика работы с счетчиком score, для победы нам нужно набрать `256` очков:
![[assets/f2_score.png]]

Более того, глобальная `SCORE` перменная меняется еще и в `onCollide()` функциях:
![[assets/f2_score1.png]]

Я попробовал пропатчить бинарь, снизив счетчик, особого успеха мне это не дало, но зато я заметил функцию `resetEverything()` c того же скрина выше. Она ресеттила все состояние игры.
С какого-то момента я обратил внимание на структуру `OBSTACLES`:

![[assets/f2_obstacles.png]]

Стоило мне расстроиться и уже пойти спать, как тут просыпается Рафид и говорит на мой уже давний запрос на хелпу: "Прочекай `resetEverything()`", на что я мощно ответил, получив заряд motivation:

![[assets/f2_rafeed.png]]

![[assets/f2_motivated.png]]

Рядышком с `OBSTACLES` я обнаруживаю два массива:
![[assets/f2_labels.png]]

Более того, это не просто чето-рандомное, в листинге при ресеттинге обстаклов этот массив как раз используется:
![[assets/f2_listing.png]]

Массив большой, состоит только из байтиков 0 и 1. Попробовал следующий вариант - в биты превратил, так как массив огроменнейший, а если и оставлять в виде байтов, то из них не получится чего-то читабельного. Сначала споткнулся над тем, что обрабатывал как последовательность из `00` и `01`, на что мне выдалась абракадабра, ну и я попрорбовал обратить `00` в `0` и `01` в `1`:
![[assets/f2_result.png]]

Боже мой, время полшестого утра. В 12 по работе синк, потом спидран проекта по другому предмету, однако когда дело доходит до реверсинга, включается упорство, motivation из dmc5 (флаг всегда есть!), и тот самый [музон](https://music.youtube.com/watch?v=gP9it-bWf_E&feature=shared). 